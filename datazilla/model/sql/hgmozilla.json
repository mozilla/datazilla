{
    "inserts":{
        "set_pushlog":{
            "sql":"INSERT INTO `pushlogs` (`push_id`, `date`, `user`, `branch_id`)
                   VALUES (?, ?, ?, ?)",
            "host":"master_host"
        },
        "set_node":{
            "sql":"INSERT INTO `changesets` (`node`, `author`, `branch`, `desc`, `pushlog_id`)
                   VALUES (?,?,?,?,?)",
            "host":"master_host"
        }
    },
    "selects":{
        "get_last_insert_id":{
            "sql":"SELECT LAST_INSERT_ID() AS 'id'",
            "host":"master_host"
        },
        "get_all_branches":{
            "sql":"SELECT id, name, uri FROM branches",
            "host":"master_host"
        },
        "get_all_pushlogs":{
            "sql":"SELECT * FROM pushlogs",
            "host":"master_host"
        },
        "get_pushlogs_since_date":{
            "sql":"SELECT pl.*, br.name as 'branch_name'
                FROM pushlogs as pl
                LEFT JOIN branches as br ON pl.branch_id = br.id
                WHERE pl.date > ?",
            "host":"master_host"
        },
        "get_pushlog":{
            "sql":"SELECT * FROM pushlogs WHERE push_id = ?",
            "host":"master_host"
        },
        "get_pushlog_count_by_date":{
            "sql":"SELECT count(id) as 'pl_count' from pushlogs WHERE date > ?",
            "host":"master_host"
        },
        "get_all_changesets":{
            "sql":"SELECT * FROM changesets",
            "host":"master_host"
        },
        "get_changeset_nodes_since_date":{
            "sql":"SELECT cs.node, pl.date, pl.push_id, br.name as 'branch_name'
                    FROM changesets as cs
                    LEFT JOIN pushlogs as pl ON cs.pushlog_id = pl.id
                    LEFT JOIN branches as br ON pl.branch_id = br.id
                    WHERE pl.date > ?",
            "host":"master_host"
        },
        "get_changesets":{
            "sql":"SELECT * FROM changesets where pushlog_id = ?",
            "host":"master_host"
        }
    }
}